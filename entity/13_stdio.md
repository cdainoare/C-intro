# 標準入出力

標準入出力とは主にキーボードからの入力や、コンソールへの出力を指す。ファイル入出力をすでに学んだ読者にとって難しいことはない。

## 標準入力

Cでは標準入力は`stdin`という`FILE`オブジェクトに割り当てられている。これは標準入力ストリームに結び付けられており、`<stdio.h>`で定義されている。つまりプログラマーは何の用意もなしにいきなり`main`関数に`fscanf_s(stdin, "");`などと書いてもいいわけだ。しかし、毎回`fscanf_s`に`stdin`を渡すのは面倒だ。だからCには`scanf_s`という標準入力から入力する関数がある。`fscanf_s`の第一引数を除いただけだ。同様に`fgets`の標準入力版の`gets_s`関数や、`fgetc`関数の標準入力版の`getchar`関数がある。

## 標準出力

Cでは標準出力は`stdout`という`FILE`オブジェクトに割り当てられている。これは標準出力ストリームに結び付けられており、`stdin`と同様に`<stdio.h>`で定義されている。勿論、`FILE`オブジェクトを受け取る引数に`stdout`を渡してもいいが、標準入力と同様に`fprintf_s`の代わりに`printf_s`関数、`fputc`の代わりに`putchar`、`fputs`の代わりに`puts`関数を用いて標準出力に出力できる。

## 標準エラー出力

標準エラー出力 (`stderr`) は、通常のストリームにはあるバッファリングがない出力ストリームだ。バッファリングがないため出力したデータはすぐにストリームに書き込まれる。

標準エラー出力に出力するためにはファイル入出力関数の`FILE`型の引数に`stderr`を指定する。

# リダイレクト

Cの機能ではないが、多くのコンソールで標準入出力をキーボードとコンソール以外にすることができる。
例えば以下のプログラムをコンパイルして実行して好きな整数を打ち込もう。絶対値があまり大きな数字でなければ問題なくコンソールに入力した値がそのまま出てきたはずだ。

```c
// redirect.c
#include <stdio.h>

int main(void) {
    int value;
    scanf_s("%d", &value);
    printf_s("%d\n", value);
    fprintf_s(stderr, "%d\n", value);
}
```

では次はリダイレクトを用いて数字を入力させよう。新しいファイルを作り好きな整数を書いて例えば`input.txt`などと名前を付けて保存しよう。

先ほど作った実行ファイルの名前をa.exeとして次のコマンドを打とう。

```
> a.exe <input.txt
```

画面にはファイルに書いた数字が出てきただろうか。コンソールでファイルを実行するとき`<`の後にファイル名を書くと、標準入力がリダイレクトされる。プログラムは指定された場所から入力を受け取るようになる。

次に標準出力をリダイレクトする。

```
> a.exe <input.txt >output.txt
```

`>ファイル名`と書けば標準出力をリダイレクトできる。

最後に標準エラー出力をリダイレクトする。読者の環境が分からないので2通りの方法を紹介する。どちらかの方法で標準エラー出力をリダイレクトできるはずだ。

```
> a.exe >&err.txt
> a.exe 2>err.txt
```

`>&`もしくは`2>`と書けば標準エラー出力をリダイレクトできる。
