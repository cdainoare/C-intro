# 演算

この項目ではコンピューターに計算させるための演算子や、式の書き方を学んでいく。今までの項目ではほとんどC言語のコードを書くということはなく、読者の皆はとても退屈そうに読んでいたかもしれないが、それもこの項目までだ。

## 算術演算子

まず演算に使う記号について学ぼう。C言語では算術演算として基本的な5つの命令を演算子として用意してある。

- `+`演算子 :   足し算
- `-`演算子 :   引き算
- `*`演算子 :   掛け算
- `/`演算子 :   割り算
- `%`演算子 :   剰余

`=`演算子は算術演算子ではないが、大変よく使うので最初に教えておきたい。`=`演算子は右辺の式の値を左辺に代入する。

箇条書きにした演算子と`=`演算子はすべて項を2つとる。すなわち二項演算子だ。演算子の前後に項を置くことができる。試しにいくつか計算をしてみよう。Cはコンピューター上で動くので多少複雑な計算であっても一瞬で答えが出る。また、Cでは数学の式と同じように括弧`()`で演算の優先順位を指定できる。

```c
int main(void){
    int answer = 7 * (3 + 9) / 2 - 10;
}
```

実は先のコードは実行時に計算をしていない。ではいつ計算しているか？答えはコンパイル中だ。コンパイラは賢いので式が定数の場合はコンパイル時に計算する。すなわち先ほどのコードは以下のコードと全く同じ動作をする。

```c
int main(void){
    int answer = 32;
}
```

## 演算の結合性

演算には結合性というものがある。結合性というのは右結合か左結合かというものだ。また変な単語が出てきてしまったがこれも難しいことではない。

例えば足し算の場合

```
1 + 1 + 1;
```

などと書くと

```
(1 + 1) + 1
```

と普通は計算される。これは常識的にもプログラム的にもそうなる。このように左辺が先に計算される演算は左結合である。`-` `*` `/` `%`などもすべて左結合である。

右結合の演算子には前置`--`とか単項`*`演算子など全ての単項演算子と`?:`の三項条件演算子、それから`=`や`+=`などの代入演算子だ。

```c
int a = 1;
int b;
int c = 4;
a = b = c;
```

さあこのコードでは`a`も`b`も`c`も`4`になる。なぜなら`=`は右結合だからだ。

## 式

>式（expression）は，演算子及びオペランドの列とする。式は，値の計算を指定するか，オブジェクト若しくは関数を指し示すか，副作用を引き起こすか，又はそれらの組合せを行う。

使いまわしで申し訳ないが、もう一度以下のコードを見てほしい。

```c
int main(void){
    int answer = 7 * (3 + 9) / 2 - 10;
}
```

`answer`の初期化式`7 * (3 + 9) / 2 - 10`はまさに演算子とオペランドの列で、値の計算だ。よってこれは式だ。


