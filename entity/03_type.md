# 型

前からちょくちょく名前は聞いているとは思うが、型に関して読者はほとんど知らないし、知っていたとしても`int`という型が存在するということだけで、`int`が何を意味するのも分かっていないだろう。単純明快な答えを言えば、`int`はほとんどの環境で符号付32bit整数だ。

ほかの言語をやったことがある読者の中にはPythonやJavaScriptといった動的型付け言語を知っている者もいるかもしれない。あれらの言語では変数に何でも代入できるから便利だと感じる反面、ある処理をしたいとき、変数に欲しい型の値が格納されているかを確認するためにひと手間かかってしまう。一方でC言語は静的型付け言語と言って、コンパイル時にすべての変数の型が決まる。変数に何でも代入できる便利さとはお別れになるものの、コードを書いているとき頭の中は型のことでぐちゃぐちゃにならない。関数がどんな型の値を受け取ってどんな型の値を返すのかは厳密に定められていて明確だ。まずはそのことを押さえてC言語に臨んでほしい。**Cの型は静的**だ。

## 型とは

型というのはデータの種類といってもいい。例えば`int`では-2^31～2^31-1までの値しか表現できない。ほとんどの環境の`char`では-128～127までだ。なので`char`という型は-128～127までしか表現できない種類の型だと言えるだろう。

## 型の種類

型はデータの種類だが、型にも種類がある。ここで言いたい型の種類というのはつまり、`int`と`char`とかではなく、`int`と`int*`とか、`int`と`struct hoge`とかだ。前者(`int`など)を`基本型`といい、後者を`複合型`と言う。複合型はポインタや構造体など様々なことを学んでいくうえで自然と分かってくるので後回しにする。

### 基本型

Cの基本型(=言語によって提供されている型)には大きく分けて2種類ある。

1. 整数型
2. 浮動小数点型

の二つだ。まずは整数型について見ていく。

整数型とは文字通り、整数の値を表現できる種類のものだ。型によって占有するメモリ量が異なり、それによって表現できる値の幅が変わる。例えば、`char`なら256種類の整数を表現でき、`int`なら約41億種類の整数を表現することができる。ここで整数型の一覧を見てみよう。但し型のサイズはx86_64環境での値とする。

|型名|サイズ|表現できる値|
|:-|----:|---------:|
|signed char|1 byte|-128~127|
|unsigned char|1 byte|0~255|
|signed short|2 byte|-32768~32767|
|unsigned short|2 byte|0~65535|
|signed int|4 byte|-2147483648~2147483647|
|unsigned int|4 byte|0~4294967295|
|signed long|Winでは 4 byte, Linuxなどでは 8 byte|intまたはlong longと同じ|
|unsigned long|Winでは 4 byte, Linuxなどでは 8 byte|unsigned intまたはunsigned long longと同じ|
|signed long long|8 byte|-9223372036854775808~9223372036854775807|
|unsigned long long|8 byte|0~18446744073709551615|

ちなみに整数型では`signed`と`unsigned`を省略できる。それを省略した場合ほとんどの場合で暗黙的に`signed`になるが、`char`に限っては符号を持つか持たないかは処理系定義である。GCCではx86_64向けにコンパイルすればデフォルトで符号付きになるが、ARMでは符号なしになる。また、`char`と`signed char`と`unsigned char`はそれぞれ異なる型である。`signed`が付く型が`signed`が付かない型と等しくないのは`signed char`と`char`だけである。

ところで`char`と単に書いてもどうせ読者の環境では`signed char`になる。ここで心にとめておかなければならないのは`char`に`signed`と付けることより、型にもいろいろなものがあり、格納したいデータによって適切な型を選択する必要があるということだ。例えばShift-JISとかUTF-8の文字を格納したいならば`char`を選択し、配列のサイズを格納したいならば`unsigned long long`型を選択するというように、適切な型を選択すればそれだけでもソースコードはより人間に読みやすくなり、思わぬバグを防ぐことができる。

整数型について理解したら次は浮動小数点型を学ぼう。浮動小数点型とは読んで字のごとく、小数点が動く型だ。読者の中にはイメージできない者もいるかもしれないが、例を見れば何も難しいことはないし、C言語では厳密な数値を求めないのであれば普通の実数のように扱うことができる。浮動小数点型には3種類あるが、主に使うのは2種類だけだろう。

|型名|精度|表現できる最大の値|表現できる最小の値|
|:---|---:|----:|---:|
|float|32 bit|3.402823e+38|1.175494e-38|
|double|64 bit|1.797693e+308|2.225074e-308|
|long double|少なくともdoubleと同等かそれより大きい|同左|同左|

`long double`は処理系によって異なり、`8byte`で`64bit`の精度だったり、`16byte`で`80bit`の精度だったりする。自分が使う処理系で`long double`が何byteあるかは簡単に確認できる。

```C
#include <stdio.h>

int main(void){ printf("%llu\n", sizeof(long double)); }
```

以上のソースコードをコンパイルして実行すれば読者の環境での`long double`のサイズを得ることができる。

```
> clang sample\long_double_size.c

> a.exe
8

```

おそらく`8`か`16`という数字が出力されたはずだ。

また読者自身の環境でのそれぞれの型が表現できる正確な値の限界を知りたいときは上の表を参考にするより`<limits.h>`にあるマクロを参照すると良い。例えば`unsigned int`で表現できる最大の値は`UINT_MAX`で定義されている。
