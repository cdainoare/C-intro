# ファイル入出力

Cではファイルなどにデータを書き込んだり、ファイルからデータを読んだりするために必要な関数やデータ型をまとめて定義してある`stdio.h`というヘッダファイルがある。プログラマーはハードディスクやOSのことを考えることなくCの標準ライブラリによってIOを管理することができる。
ファイルへの入出力には`FILE`オブジェクトを使う。`FILE`オブジェクトはCの規格書で以下のように定められている。

>`FILE`は、ファイル位置表示子, 結びつけられたバッファへのポインタ, 読み取りエラーまたは書き込みエラーが起こったかどうかを記録するエラー表示子(*error indicator*), ファイルの終わりに到達したかどうかを記録するファイル終了表示子(*end-of-file indicator*)などストリームを制御するために必要なすべての情報を記録することのできるオブジェクト型とする。

`FILE`オブジェクトを構築すればファイルへの入出力ができるというわけだ。`FILE`オブジェクトを構築して、ファイルをオープンするためには`fopen`関数を使う。`fopen`関数にはファイル名とファイルのオープンモードを指定する。ファイルのオープンモードには様々あるが、ここでは`"r"`と`"w"`しか使わないことにする。気になる読者はインターネットでfopenについて検索すると良いだろう。

`fopen`関数に`"r"`か`"w"`のようなモードを指定するとファイルはテキストストリームに写像される。Cではテキストストリームのほかにバイナリストリームという論理データストリーム(*stream*)を定めている。バイナリストリームはファイルの中身を1ビットも変えずに出力または入力する。しかし、テキストストリームではホスト環境内でテキストを表現する異なった規約に合わせるために、入力および出力の際に文字を付加、変更または削除してもよいことになっている。具体的には改行文字やそのほかの制御文字が付加、変更または削除の対象になる。


